<meta charset="utf-8">
<script>

   	function getRandomInt(min, max) {
	    return Math.floor(Math.random() * (max - min +1)) + min;
	}
	
	function getCard() {
	    var cards = ["6","7","8","9","10","J","Q","K","A"];
		return cards[getRandomInt(0, cards.length - 1)];
	}
	   
	function getSum(arr) {
	    var sum = 0;
         for (var x=0; x<arr.length; x++) {
		    var i = arr[x];
		    if ((arr[x] == "J") || (arr[x] == "Q") || (arr[x] == "K")) {
			   	sum = sum + 10;
			} else if (arr[x] != "A") {
			    sum = sum + parseInt(i);
			} else if (sum  > 10) {
			    sum = sum + 1;
			} else {
			    sum = sum + 11;
			}
			}
			return sum;
	}
	 
	function getStatus() {
	    return "Дилер: " + dealer.join(' ') + ". Игрок:" + player.join(' ') + "."
	}
	
	    var dealer = [getCard()]
	    var player = [getCard(), getCard()]
		var answer = "";
	
	
	do {
	    if (getSum(player) < 21) {
	        answer = prompt(getStatus() + "Хотите взять еще карту? y - да, иначе - нет");
		    if (answer == "y") {
		        player.push(getCard());
			} else {
		while (getSum(dealer) < 17) {
			    dealer.push(getCard());
			};
			
			if (getSum(dealer) == 21) {
			    alert(getStatus() + " Сумма карт у дилера: " + getSum(dealer) + " Black Jack! Дилер выйграл!");
			    } else if (getSum(dealer) > 21) {
			   alert(getStatus() + " Сумма карт у дилера: " + getSum(dealer) + " Перебор! Дилер проиграл!");
			   	} else if (getSum(dealer) == getSum(player)) {
			    alert(getStatus() + " Ничья!" + " Сумма карт у игрока: " + getSum(player) + " Сумма карт у дилера: " + getSum(dealer));
				} else if (getSum(player) > getSum(dealer)  && getSum(player) < 21) {
			    alert(getStatus() + " Вы выйграли!" + " Сумма карт у игрока: " + getSum(player) + " Сумма карт у дилера: " + getSum(dealer));
				} else  {
			    alert(getStatus() + " Вы проиграли!" + " Сумма карт у игрока: " + getSum(player) + " Сумма карт у дилера: " + getSum(dealer));
				}
			}
		} else if (getSum(player) == 21) {
            alert(getStatus() + " Сумма карт у игрока: " + getSum(player) + " Black Jack! Вы выиграли!");
			break;
        } else if (getSum(player) > 21) {
            alert(getStatus() + " Сумма карт у игрока: " + getSum(player) + " Перебор! Вы проиграли!");
            break;			
	    } 
		  
		
	}while(answer == "y")
	
	 
	
</script>